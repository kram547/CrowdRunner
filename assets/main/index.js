System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,i,n,a,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.Node,s=e.Vec3,c=e.Component}],execute:function(){var u,p,f,h,d,g,m;n._RF.push({},"35b3fIkLLFFEYjcnJb7mM09","CameraFollow",void 0);var b=a.ccclass,y=a.property;e("CameraFollow",(u=b("CameraFollow"),p=y(l),u((d=t((h=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"target",d,i(t)),r(t,"offset",g,i(t)),r(t,"smoothSpeed",m,i(t)),t}return o(t,e),t.prototype.update=function(e){if(this.target){var t=this.target.getPosition().clone();t.add(this.offset);var o=this.node.getPosition();s.lerp(o,o,t,e*this.smoothSpeed),this.node.setPosition(o)}},t}(c)).prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"offset",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,8,-15)}}),m=t(h.prototype,"smoothSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/Gate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,a,l,u,s,p,c,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,u=e.SpriteFrame,s=e.Node,p=e.BoxCollider,c=e.MeshRenderer,h=e.Color,d=e.Component}],execute:function(){var b,m,f,y,g,v,S,w,x,C,P,T,z,G,M,W,F,I,D,L,R,_,H,N;a._RF.push({},"705440y+rVIK6bSVmy8Q5ka","Gate",void 0);var k=l.ccclass,B=l.property;e("Gate",(b=k("Gate"),m=B({type:String}),f=B({type:u}),y=B({type:u}),g=B({type:[u],tooltip:"Массив цифр: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]"}),v=B({type:s}),S=B({type:s}),w=B({tooltip:"Включить движение влево-вправо"}),x=B({tooltip:"Ширина дороги"}),C=B({tooltip:"Ширина ворот"}),b((z=t((T=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"gateType",z,o(t)),n(t,"value",G,o(t)),n(t,"addColor",M,o(t)),n(t,"subtractColor",W,o(t)),n(t,"plusSprite",F,o(t)),n(t,"minusSprite",I,o(t)),n(t,"numberSprites",D,o(t)),n(t,"textPlane",L,o(t)),n(t,"numberPlane",R,o(t)),n(t,"enableMovement",_,o(t)),n(t,"roadWidth",H,o(t)),n(t,"gateWidth",N,o(t)),t.collider=null,t.currentSpeed=0,t.direction=1,t}i(t,e);var a=t.prototype;return a.start=function(){this.collider=this.node.getComponent(p),this.collider&&(this.collider.isTrigger=!0);var e=.375*(this.roadWidth-this.gateWidth)*2;this.direction=Math.random()<.5?1:-1,this.currentSpeed=e*this.direction,console.log("Gate linear movement: speed="+e.toFixed(2)+", direction="+(this.direction>0?"RIGHT":"LEFT")),this.updateGateColor(),this.applySignTexture(),this.applyNumberTexture()},a.update=function(e){if(this.enableMovement){var t=this.roadWidth/2-this.gateWidth/2,i=-t,r=this.node.position,n=r.x+this.currentSpeed*e;n>t?(n=t,this.direction=-1,this.currentSpeed=Math.abs(this.currentSpeed)*this.direction):n<i&&(n=i,this.direction=1,this.currentSpeed=Math.abs(this.currentSpeed)*this.direction),this.node.setPosition(n,r.y,r.z)}},a.updateGateColor=function(){for(var e,t=this.node.getComponentsInChildren(c),i="add"===this.gateType?this.addColor:this.subtractColor,n=r(t);!(e=n()).done;){var o=e.value;if(o.node!==this.textPlane&&o.node!==this.numberPlane){var a=o.material;a&&a.setProperty("mainColor",i)}}},a.applySignTexture=function(){if(this.textPlane){var e="add"===this.gateType?this.plusSprite:this.minusSprite;if(e){var t=e.texture,i=this.textPlane.getComponent(c);i&&i.material&&(i.material.setProperty("mainTexture",t),console.log("✅ Знак: "+("add"===this.gateType?"+":"-")))}}},a.applyNumberTexture=function(){if(this.numberPlane)if(this.value<0||this.value>=this.numberSprites.length)console.warn("Gate: нет спрайта для цифры "+this.value);else{var e=this.numberSprites[this.value];if(e){var t=e.texture,i=this.numberPlane.getComponent(c);i&&i.material&&(i.material.setProperty("mainTexture",t),console.log("✅ Цифра: "+this.value))}else console.warn("Gate: спрайт для цифры "+this.value+" не назначен")}},a.onDestroy=function(){console.log("Gate "+this.gateType+" destroyed")},t}(d)).prototype,"gateType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"add"}}),G=t(T.prototype,"value",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),M=t(T.prototype,"addColor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(80,255,100,255)}}),W=t(T.prototype,"subtractColor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,80,80,255)}}),F=t(T.prototype,"plusSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(T.prototype,"minusSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"numberSprites",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(T.prototype,"textPlane",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(T.prototype,"numberPlane",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(T.prototype,"enableMovement",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=t(T.prototype,"roadWidth",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),N=t(T.prototype,"gateWidth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),P=T))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/GateSpawner.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,r,o,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Prefab,s=t.instantiate,u=t.Component}],execute:function(){var c,p,h,g,d,b,f,y,m,S,w,v,T,V,C,G,z,x,A,P;r._RF.push({},"f4e73Ba6JhFQI6Xt7WOAw+3","GateSpawner",void 0);var M=o.ccclass,I=o.property;t("GateSpawner",(c=M("GateSpawner"),p=I(l),h=I({tooltip:"Минимальное значение для add ворот"}),g=I({tooltip:"Максимальное значение для add ворот"}),d=I({tooltip:"Минимальное значение для subtract ворот"}),b=I({tooltip:"Максимальное значение для subtract ворот"}),c((m=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"gatePrefab",m,n(e)),a(e,"spawnInterval",S,n(e)),a(e,"gateSpeed",w,n(e)),a(e,"roadWidth",v,n(e)),a(e,"gateWidth",T,n(e)),a(e,"initialGatesCount",V,n(e)),a(e,"initialGatesStartZ",C,n(e)),a(e,"randomRangeMultiplier",G,n(e)),a(e,"minAddValue",z,n(e)),a(e,"maxAddValue",x,n(e)),a(e,"minSubtractValue",A,n(e)),a(e,"maxSubtractValue",P,n(e)),e.timer=0,e.gateSpacing=0,e.gateCounter=0,e.playerController=null,e.recentValues=[],e.maxHistorySize=4,e.recentTypes=[],e.maxTypeHistory=2,e}i(e,t);var r=e.prototype;return r.start=function(){this.gateSpacing=this.gateSpeed*this.spawnInterval,console.log("Gate spacing: "+this.gateSpacing.toFixed(2)+" units");var t=this.node.parent.getChildByName("Player");t&&(this.playerController=t.getComponent("PlayerController")),this.spawnInitialGates()},r.update=function(t){var e=this;if(this.timer+=t,this.timer>=this.spawnInterval){var i=-1/0;this.node.children.forEach((function(t){t.active&&t.position.z>i&&(i=t.position.z)})),i>-1/0&&this.spawnSingleGate(i+this.gateSpacing),this.timer=0}[].concat(this.node.children).forEach((function(i){if(i.active){var a=i.position.clone();a.z-=e.gateSpeed*t,i.setPosition(a),i.position.z<-20&&i.destroy()}}))},r.spawnInitialGates=function(){for(var t=0;t<this.initialGatesCount;t++){var e=this.initialGatesStartZ+t*this.gateSpacing;this.spawnSingleGate(e)}},r.spawnSingleGate=function(t){if(this.gatePrefab){var e=(this.roadWidth-this.gateWidth)*this.randomRangeMultiplier,i=(Math.random()-.5)*e,a=s(this.gatePrefab);a.setParent(this.node),a.setPosition(i,0,t);var n=a.getComponent("Gate");if(n){var r,o;if(0===this.gateCounter?(r=!0,console.log("ПЕРВЫЕ ВОРОТА: Принудительно add")):r=this.shouldBeAddGate(),n.gateType=r?"add":"subtract",this.recentTypes.push(n.gateType),this.recentTypes.length>this.maxTypeHistory&&this.recentTypes.shift(),r)o=this.getUniqueValue(this.minAddValue,this.maxAddValue);else{var l=this.playerController?this.playerController.getCrowdCount():10,u=Math.min(this.maxSubtractValue,l-1);o=u<this.minSubtractValue?this.minSubtractValue:this.getUniqueValue(this.minSubtractValue,u),console.log("Subtract gate: currentCrowd="+l+", maxPossible="+u+", value="+o)}n.value=o,this.gateCounter++,console.log("Gate #"+this.gateCounter+" created: "+n.gateType+" "+n.value+" at Z="+t.toFixed(2))}}else console.error("Gate Prefab not assigned!")},r.shouldBeAddGate=function(){return this.recentTypes.length>=2&&"add"===this.recentTypes[this.recentTypes.length-1]&&"add"===this.recentTypes[this.recentTypes.length-2]?(console.log("Последние 2 были ADD → принудительно SUBTRACT"),!1):this.recentTypes.length>=2&&"subtract"===this.recentTypes[this.recentTypes.length-1]&&"subtract"===this.recentTypes[this.recentTypes.length-2]?(console.log("Последние 2 были SUBTRACT → принудительно ADD"),!0):Math.random()<.5},r.getUniqueValue=function(t,e){var i,a=0;do{i=Math.floor(Math.random()*(e-t+1))+t,a++}while(this.recentValues.includes(i)&&a<20);return this.recentValues.push(i),this.recentValues.length>this.maxHistorySize&&this.recentValues.shift(),i},e}(u)).prototype,"gatePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(y.prototype,"spawnInterval",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.25}}),w=e(y.prototype,"gateSpeed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=e(y.prototype,"roadWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),T=e(y.prototype,"gateWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),V=e(y.prototype,"initialGatesCount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),C=e(y.prototype,"initialGatesStartZ",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),G=e(y.prototype,"randomRangeMultiplier",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=e(y.prototype,"minAddValue",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),x=e(y.prototype,"maxAddValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),A=e(y.prototype,"minSubtractValue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),P=e(y.prototype,"maxSubtractValue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CameraFollow.ts","./Gate.ts","./GateSpawner.ts","./PlayerController.ts","./StartScreen.ts","./Stickman.ts","./TiltEffect.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,a,s,c,l,u,h,d,f,p,m,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,c=t.Prefab,l=t.Node,u=t.BoxCollider,h=t.input,d=t.Input,f=t.director,p=t.instantiate,m=t.tween,g=t.Vec3,v=t.Component}],execute:function(){var w,C,y,b,T,z,O,E,x,M,D,P,k,S;a._RF.push({},"5d956aDRnZCkrR9xaSOmaWT","PlayerController",void 0);var G=s.ccclass,R=s.property;t("PlayerController",(w=G("PlayerController"),C=R(c),y=R({tooltip:"Задержка перед перезапуском (секунды)"}),w((z=e((T=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"stickmanPrefab",z,o(e)),r(e,"horizontalSpeed",O,o(e)),r(e,"initialCrowdCount",E,o(e)),r(e,"stickmanRadius",x,o(e)),r(e,"magneticForce",M,o(e)),r(e,"maxCrowdRadius",D,o(e)),r(e,"spawnAnimationDuration",P,o(e)),r(e,"despawnAnimationDuration",k,o(e)),r(e,"restartDelay",S,o(e)),e.crowd=[],e.targetX=0,e.collider=null,e.processedGates=new Set,e.crowdContainer=null,e.isGameOver=!1,e}i(e,t);var a=e.prototype;return a.start=function(){this.crowdContainer=this.node.getChildByName("CrowdContainer"),this.crowdContainer||(console.warn("CrowdContainer не найден! Создаю автоматически."),this.crowdContainer=new l("CrowdContainer"),this.crowdContainer.setParent(this.node));for(var t=0;t<this.initialCrowdCount;t++)this.addStickman();this.collider=this.node.getComponent(u),this.collider&&(this.collider.isTrigger=!0,this.collider.on("onTriggerEnter",this.onTriggerEnter,this)),h.on(d.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(d.EventType.TOUCH_END,this.onTouchEnd,this)},a.onDestroy=function(){h.off(d.EventType.TOUCH_MOVE,this.onTouchMove,this),h.off(d.EventType.TOUCH_END,this.onTouchEnd,this),this.collider&&this.collider.off("onTriggerEnter",this.onTriggerEnter,this)},a.onTouchMove=function(t){if(!this.isGameOver){var e=t.getDelta();this.targetX+=.01*e.x,this.targetX=Math.max(-4,Math.min(4,this.targetX))}},a.onTouchEnd=function(t){},a.update=function(t){if(!this.isGameOver){var e=this.node.position,i=e.x+(this.targetX-e.x)*this.horizontalSpeed*t;this.node.setPosition(i,e.y,e.z),this.applyMagneticEffect(t)}},a.applyMagneticEffect=function(t){for(var e,i=n(this.crowd);!(e=i()).done;){var r=e.value;if(r&&r.isValid){var o=r.position,a=Math.sqrt(o.x*o.x+o.z*o.z);if(a>.1){var s=this.magneticForce*(a/this.maxCrowdRadius),c=o.x-o.x/a*s*t,l=o.z-o.z/a*s*t;r.setPosition(c,0,l)}this.avoidOverlap(r)}}},a.avoidOverlap=function(t){for(var e,i=t.position,r=1.2*this.stickmanRadius,o=n(this.crowd);!(e=o()).done;){var a=e.value;if(a!==t&&a.isValid){var s=a.position,c=i.x-s.x,l=i.z-s.z,u=Math.sqrt(c*c+l*l);if(u<r&&u>.01){var h=.2*(r-u),d=c/u*h,f=l/u*h;t.setPosition(i.x+d,0,i.z+f)}}}},a.onTriggerEnter=function(t){var e=t.otherCollider.node;if(!this.processedGates.has(e)){var i=e.getComponent("Gate");i&&(this.applyGateEffect(i.gateType,i.value),this.processedGates.add(e))}},a.applyGateEffect=function(t,e){var i=this.getCrowdCount(),n=i;if("add"===t?n=i+e:"subtract"===t&&(n=i-e),n<1)return console.log("Game Over! Restarting..."),void this.gameOver();this.setCrowdCount(n)},a.gameOver=function(){this.isGameOver=!0,this.scheduleOnce((function(){f.loadScene(f.getScene().name)}),this.restartDelay)},a.addStickman=function(){var t=p(this.stickmanPrefab);t.setParent(this.crowdContainer);var e=Math.random()*Math.PI*2,i=.6*Math.random();t.setPosition(Math.cos(e)*i,0,Math.sin(e)*i),t.setScale(0,0,0),m(t).to(this.spawnAnimationDuration,{scale:new g(1,1,1)},{easing:"backOut"}).start(),this.crowd.push(t)},a.removeStickman=function(){if(this.crowd.length>1){var t=this.crowd.pop();m(t).to(this.despawnAnimationDuration,{scale:new g(0,0,0)},{easing:"backIn"}).call((function(){t&&t.isValid&&t.destroy()})).start()}},a.setCrowdCount=function(t){var e=this;t=Math.max(1,t);var i=this.crowd.length;if(t>i)for(var n=0;n<t-i;n++)this.scheduleOnce((function(){e.addStickman()}),.05*n);else if(t<i)for(var r=0;r<i-t;r++)this.scheduleOnce((function(){e.removeStickman()}),.05*r)},a.getCrowdCount=function(){return this.crowd.length},e}(v)).prototype,"stickmanPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(T.prototype,"horizontalSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),E=e(T.prototype,"initialCrowdCount",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=e(T.prototype,"stickmanRadius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),M=e(T.prototype,"magneticForce",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),D=e(T.prototype,"maxCrowdRadius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),P=e(T.prototype,"spawnAnimationDuration",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),k=e(T.prototype,"despawnAnimationDuration",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),S=e(T.prototype,"restartDelay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=T))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/StartScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,a,o,i,l,s,c,u,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,s=e.Node,c=e.input,u=e.Input,p=e.director,d=e.Component}],execute:function(){var h,f,S,g,v,y,m;i._RF.push({},"d9de0fh5jxGepOmt5WLarql","StartScreen",void 0);var G=l.ccclass,T=l.property;e("StartScreen",(h=G("StartScreen"),f=T(s),S=T(s),h((y=t((v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(t,"player",y,o(t)),a(t,"gateSpawner",m,o(t)),t.gameStarted=!1,t}n(t,e);var i=t.prototype;return i.start=function(){if(console.log("StartScreen loaded. Tap to start!"),this.gateSpawner){var e=this.gateSpawner.getComponent("GateSpawner");e&&(e.enabled=!1,console.log("GateSpawner disabled"))}this.pauseAllGates()},i.onDestroy=function(){c.off(u.EventType.TOUCH_START,this.onTouchStart,this)},i.onEnable=function(){c.on(u.EventType.TOUCH_START,this.onTouchStart,this)},i.onTouchStart=function(e){if(!this.gameStarted){if(console.log("Game started!"),this.gameStarted=!0,this.player){var t=this.player.getComponent("PlayerController");t&&(t.controlEnabled=!0,console.log("PlayerController enabled"))}if(this.gateSpawner){var n=this.gateSpawner.getComponent("GateSpawner");n&&(n.enabled=!0,console.log("GateSpawner enabled"))}this.resumeAllGates(),c.off(u.EventType.TOUCH_START,this.onTouchStart,this)}},i.pauseAllGates=function(){var e=p.getScene().children;this.findAndPauseGates(e)},i.resumeAllGates=function(){var e=p.getScene().children;this.findAndResumeGates(e)},i.findAndPauseGates=function(e){for(var t,n=r(e);!(t=n()).done;){var a=t.value,o=a.getComponent("Gate");o&&(o.enabled=!1),a.children.length>0&&this.findAndPauseGates(a.children)}},i.findAndResumeGates=function(e){for(var t,n=r(e);!(t=n()).done;){var a=t.value,o=a.getComponent("Gate");o&&(o.enabled=!0),a.children.length>0&&this.findAndResumeGates(a.children)}},t}(d)).prototype,"player",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(v.prototype,"gateSpawner",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/Stickman.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,l,a,u,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.math,u=t.Vec3,s=t.Quat,c=t.Component}],execute:function(){var p,h,b,f,m,d,y,g,v,S,T;o._RF.push({},"e8f8frXY4NFAIKFGTKslur0","Stickman",void 0);var x=l.ccclass,z=l.property;t("Stickman",(p=x("Stickman"),h=z({tooltip:"Амплитуда подпрыгивания"}),b=z({tooltip:"Скорость подпрыгивания (полный цикл за 0.5 сек)"}),p((d=e((m=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"maxTiltAngle",d,r(e)),n(e,"tiltSpeed",y,r(e)),n(e,"returnSpeed",g,r(e)),n(e,"bounceStrength",v,r(e)),n(e,"bounceHeight",S,r(e)),n(e,"bounceSpeed",T,r(e)),e.previousX=0,e.velocityX=0,e.currentTiltZ=0,e.tiltVelocity=0,e.bounceTime=0,e.bounceOffset=0,e.initialY=0,e}i(e,t);var o=e.prototype;return o.start=function(){var t,e=null==(t=this.node.parent)?void 0:t.parent;e&&(this.previousX=e.position.x),this.bounceOffset=Math.random(),this.initialY=this.node.position.y},o.update=function(t){var e,i=null==(e=this.node.parent)?void 0:e.parent;if(i){var n=i.position.x;this.velocityX=(n-this.previousX)/t,this.previousX=n;var r=a.clamp(3*this.velocityX,-this.maxTiltAngle,this.maxTiltAngle)-this.currentTiltZ;Math.abs(this.velocityX)>.5?this.tiltVelocity+=r*this.tiltSpeed*t:this.tiltVelocity+=r*this.returnSpeed*t,this.tiltVelocity*=1-this.bounceStrength,this.currentTiltZ+=this.tiltVelocity*t*60,this.currentTiltZ=a.clamp(this.currentTiltZ,1.2*-this.maxTiltAngle,1.2*this.maxTiltAngle);var o=this.node.rotation,l=new u;o.getEulerAngles(l),l.z=this.currentTiltZ;var c=new s;s.fromEuler(c,l.x,l.y,l.z),this.node.setRotation(c),this.bounceTime+=t*this.bounceSpeed;var p=(this.bounceTime+this.bounceOffset)%1,h=(2*(p<.5?2*p:2-2*p)-1)*this.bounceHeight,b=this.node.position;this.node.setPosition(b.x,this.initialY+h,b.z)}},e}(c)).prototype,"maxTiltAngle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),y=e(m.prototype,"tiltSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),g=e(m.prototype,"returnSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=e(m.prototype,"bounceStrength",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),S=e(m.prototype,"bounceHeight",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),T=e(m.prototype,"bounceSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=m))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TiltEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,l,a,c,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.math,c=t.Vec3,s=t.Quat,u=t.Component}],execute:function(){var p,h,f,y,g,v,b,d,T,m,S;o._RF.push({},"22a66YFS6tGJJjOjTXMCyp0","TiltEffect",void 0);var x=l.ccclass,X=l.property;t("TiltEffect",(p=x("TiltEffect"),h=X({tooltip:"������������ ���� ������� (�������)"}),f=X({tooltip:"�������� ������� ��� ��������"}),y=X({tooltip:"�������� �������� � ��������� ���������"}),g=X({tooltip:"���� ������������� (bounce)"}),p((d=e((b=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"maxTiltAngle",d,n(e)),r(e,"tiltSpeed",T,n(e)),r(e,"returnSpeed",m,n(e)),r(e,"bounceStrength",S,n(e)),e.previousX=0,e.velocityX=0,e.currentTiltZ=0,e.tiltVelocity=0,e}i(e,t);var o=e.prototype;return o.start=function(){this.node.parent&&(this.previousX=this.node.parent.position.x)},o.update=function(t){if(this.node.parent){var e=this.node.parent.position.x;this.velocityX=(e-this.previousX)/t,this.previousX=e;var i=a.clamp(3*this.velocityX,-this.maxTiltAngle,this.maxTiltAngle)-this.currentTiltZ;Math.abs(this.velocityX)>.5?this.tiltVelocity+=i*this.tiltSpeed*t:this.tiltVelocity+=i*this.returnSpeed*t,this.tiltVelocity*=1-this.bounceStrength,this.currentTiltZ+=this.tiltVelocity*t*60,this.currentTiltZ=a.clamp(this.currentTiltZ,1.2*-this.maxTiltAngle,1.2*this.maxTiltAngle);var r=this.node.rotation,n=new c;r.getEulerAngles(n),n.z=this.currentTiltZ;var o=new s;s.fromEuler(o,n.x,n.y,n.z),this.node.setRotation(o)}},e}(u)).prototype,"maxTiltAngle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),T=e(b.prototype,"tiltSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),m=e(b.prototype,"returnSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=e(b.prototype,"bounceStrength",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),v=b))||v));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});